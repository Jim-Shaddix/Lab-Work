<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of scrollsubplot</title>
  <meta name="keywords" content="scrollsubplot">
  <meta name="description" content="SCROLLSUBPLOT Create axes in tiled positions.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../../menu.html tdms_peak_analysis --><!-- ../../menu.html Plots --><!-- ../menu.html Multiple --><!-- menu.html scrollsubplot -->
<h1>scrollsubplot
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>SCROLLSUBPLOT Create axes in tiled positions.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function theAxis = scrollsubplot(nrows, ncols, thisPlot) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">SCROLLSUBPLOT Create axes in tiled positions.
   SCROLLSUBPLOT(m,n,p), breaks the Figure window into
   an m-by-n matrix of small axes, selects the p-th axes for 
   for the current plot, and returns the axis handle.  The axes 
   are counted along the top row of the Figure window, then the
   second row, etc. 
   Example:
 
       scrollsubplot(3,1,-1), plot(income)
       scrollsubplot(3,1,1), plot(declared_income)
       scrollsubplot(3,1,2), plot(tax)
       scrollsubplot(3,1,3), plot(net_income)
       scrollsubplot(3,1,4), plot(the_little_extra)
 
   plots declared_income on the top third of the window, tax in
   the middle, and the net_income in the bottom third. Above the
   top of the figure income is ploted and below the lower edge
   the_little_extra is to be found. To navigate there is a slider
   along the right figure edge.
 
   SCROLLSUBPLOT now also work with less regular subplot-layouts:

   axs3(1) = scrollsubplot(3,3,1);
   axs3(2) = scrollsubplot(3,3,3);
   axs3(3) = scrollsubplot(3,3,[4,7]);
   axs3(4) = scrollsubplot(3,3,5);
   axs3(5) = scrollsubplot(3,3,[3,6]);
   axs3(6) = scrollsubplot(3,3,10);
   axs3(7) = scrollsubplot(3,3,[8,9,11,12]);
   axs3(8) = scrollsubplot(3,3,[13,14,15]);
   for i1 = 1:8,
     if ishandle(axs3(i1))
       axes(axs3(i1))
       imagesc(randn(2+3*i1))
     end
   end

   The function works well for regular grids where m,n is constant
   for all p. When m,n varies there is no guarantee that the steps
   of the slider is nicely adjusted to the sizes of the
   subplots, further the slider also responds to mouse-wheel scrolling.

   Differences with SUBPLOT: SCROLLSUBPLOT requires 3 input
   arguments, no compatibility with subplot(323), no handle as
   input. Further  PERC_OFFSET_L is decreased from 2*0.09 to 0.07
   and PERC_OFFSET_R is decreased from 2*0.045 to 0.085. This
   leaves less space for titles and labels, but give a plaid grid
   of subplots even outside the visible figure area.
   
   Bug/feature when the slider is shifted from its initial
   position and then extra subplots is added, they get
   mis-positioned.
   
   See also SUBPLOT,</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../tdms_peak_analysis/Plots/Multiple/Sub_Plots.html" class="code" title="function Sub_Plots(tdms_data)">Sub_Plots</a>	This function plots data from the tdms files, based on flags that</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function scroll(old_val)</a></li><li><a href="#_sub2" class="code">function wheelScroll(src,evnt)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function theAxis = scrollsubplot(nrows, ncols, thisPlot)</a>
0002 <span class="comment">%SCROLLSUBPLOT Create axes in tiled positions.</span>
0003 <span class="comment">%   SCROLLSUBPLOT(m,n,p), breaks the Figure window into</span>
0004 <span class="comment">%   an m-by-n matrix of small axes, selects the p-th axes for</span>
0005 <span class="comment">%   for the current plot, and returns the axis handle.  The axes</span>
0006 <span class="comment">%   are counted along the top row of the Figure window, then the</span>
0007 <span class="comment">%   second row, etc.</span>
0008 <span class="comment">%   Example:</span>
0009 <span class="comment">%</span>
0010 <span class="comment">%       scrollsubplot(3,1,-1), plot(income)</span>
0011 <span class="comment">%       scrollsubplot(3,1,1), plot(declared_income)</span>
0012 <span class="comment">%       scrollsubplot(3,1,2), plot(tax)</span>
0013 <span class="comment">%       scrollsubplot(3,1,3), plot(net_income)</span>
0014 <span class="comment">%       scrollsubplot(3,1,4), plot(the_little_extra)</span>
0015 <span class="comment">%</span>
0016 <span class="comment">%   plots declared_income on the top third of the window, tax in</span>
0017 <span class="comment">%   the middle, and the net_income in the bottom third. Above the</span>
0018 <span class="comment">%   top of the figure income is ploted and below the lower edge</span>
0019 <span class="comment">%   the_little_extra is to be found. To navigate there is a slider</span>
0020 <span class="comment">%   along the right figure edge.</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%   SCROLLSUBPLOT now also work with less regular subplot-layouts:</span>
0023 <span class="comment">%</span>
0024 <span class="comment">%   axs3(1) = scrollsubplot(3,3,1);</span>
0025 <span class="comment">%   axs3(2) = scrollsubplot(3,3,3);</span>
0026 <span class="comment">%   axs3(3) = scrollsubplot(3,3,[4,7]);</span>
0027 <span class="comment">%   axs3(4) = scrollsubplot(3,3,5);</span>
0028 <span class="comment">%   axs3(5) = scrollsubplot(3,3,[3,6]);</span>
0029 <span class="comment">%   axs3(6) = scrollsubplot(3,3,10);</span>
0030 <span class="comment">%   axs3(7) = scrollsubplot(3,3,[8,9,11,12]);</span>
0031 <span class="comment">%   axs3(8) = scrollsubplot(3,3,[13,14,15]);</span>
0032 <span class="comment">%   for i1 = 1:8,</span>
0033 <span class="comment">%     if ishandle(axs3(i1))</span>
0034 <span class="comment">%       axes(axs3(i1))</span>
0035 <span class="comment">%       imagesc(randn(2+3*i1))</span>
0036 <span class="comment">%     end</span>
0037 <span class="comment">%   end</span>
0038 <span class="comment">%</span>
0039 <span class="comment">%   The function works well for regular grids where m,n is constant</span>
0040 <span class="comment">%   for all p. When m,n varies there is no guarantee that the steps</span>
0041 <span class="comment">%   of the slider is nicely adjusted to the sizes of the</span>
0042 <span class="comment">%   subplots, further the slider also responds to mouse-wheel scrolling.</span>
0043 <span class="comment">%</span>
0044 <span class="comment">%   Differences with SUBPLOT: SCROLLSUBPLOT requires 3 input</span>
0045 <span class="comment">%   arguments, no compatibility with subplot(323), no handle as</span>
0046 <span class="comment">%   input. Further  PERC_OFFSET_L is decreased from 2*0.09 to 0.07</span>
0047 <span class="comment">%   and PERC_OFFSET_R is decreased from 2*0.045 to 0.085. This</span>
0048 <span class="comment">%   leaves less space for titles and labels, but give a plaid grid</span>
0049 <span class="comment">%   of subplots even outside the visible figure area.</span>
0050 <span class="comment">%</span>
0051 <span class="comment">%   Bug/feature when the slider is shifted from its initial</span>
0052 <span class="comment">%   position and then extra subplots is added, they get</span>
0053 <span class="comment">%   mis-positioned.</span>
0054 <span class="comment">%</span>
0055 <span class="comment">%   See also SUBPLOT,</span>
0056 
0057 <span class="comment">%   Copyright Â© Bjorn Gustavsson 20050526-2014, Modification/extension of</span>
0058 <span class="comment">%   Mathworks subplot.</span>
0059 <span class="comment">%   Version 2, modified from version 1 in that scroll now is a subfunction,</span>
0060 <span class="comment">%   together with</span>
0061 
0062 <span class="keyword">persistent</span> maxrownr minrownr
0063 
0064 <span class="comment">%%% This is a matlab bug(?) that blanks axes that have been rescaled to</span>
0065 <span class="comment">%%% accomodate a colorbar. I've not tried to fix it. BG</span>
0066 <span class="comment">% we will kill all overlapping siblings if we encounter the mnp</span>
0067 <span class="comment">% specifier, else we won't bother to check:</span>
0068 narg = nargin;
0069 <span class="comment">% kill_siblings = 0;</span>
0070 create_axis = 1;
0071 delay_destroy = 0;
0072 tol = sqrt(eps);
0073 <span class="keyword">if</span> narg ~= 3 <span class="comment">% not compatible with 3.5, i.e. subplot ==</span>
0074              <span class="comment">% subplot(111) errors out</span>
0075   error(<span class="string">'Wrong number of arguments'</span>)
0076 <span class="keyword">end</span>
0077 
0078 <span class="comment">%check for encoded format</span>
0079 handle = <span class="string">''</span>;
0080 position = <span class="string">''</span>;
0081 
0082 kill_siblings = 1;
0083 
0084 <span class="comment">% if we recovered an identifier earlier, use it:</span>
0085 <span class="keyword">if</span>(~isempty(handle))
0086   
0087   set(get(0,<span class="string">'CurrentFigure'</span>),<span class="string">'CurrentAxes'</span>,handle);
0088   
0089 <span class="keyword">elseif</span>(isempty(position))
0090   <span class="comment">% if we haven't recovered position yet, generate it from mnp info:</span>
0091   <span class="keyword">if</span> (min(thisPlot) &lt; 1)&amp;&amp;0 <span class="comment">% negative Thisplot corresponds to</span>
0092                             <span class="comment">% panels above top row, that is OK</span>
0093     error(<span class="string">'Illegal plot number.'</span>)
0094   <span class="keyword">else</span>
0095     <span class="comment">% This is the percent offset from the subplot grid of the plotbox.</span>
0096     PERC_OFFSET_L = 0.07;
0097     PERC_OFFSET_R = 0.085;
0098     PERC_OFFSET_B = PERC_OFFSET_L;
0099     PERC_OFFSET_T = PERC_OFFSET_R;
0100     <span class="keyword">if</span> nrows &gt; 2
0101       PERC_OFFSET_T = 0.9*PERC_OFFSET_T;
0102       PERC_OFFSET_B = 0.9*PERC_OFFSET_B;
0103     <span class="keyword">end</span>
0104     <span class="keyword">if</span> ncols &gt; 2
0105       PERC_OFFSET_L = 0.9*PERC_OFFSET_L;
0106       PERC_OFFSET_R = 0.9*PERC_OFFSET_R;
0107     <span class="keyword">end</span>
0108 
0109     <span class="comment">% Subplots version:</span>
0110     <span class="comment">% row = (nrows-1) -fix((thisPlot-1)/ncols)</span>
0111     <span class="comment">% col = rem (thisPlot-1, ncols);</span>
0112     <span class="comment">% Slightly modified to allow for having negative thisPlot</span>
0113     row = (nrows-1) -floor((thisPlot-1)/ncols);
0114     col = mod (thisPlot-1, ncols);
0115     
0116     <span class="comment">% From here on to line 190 essentially identical to SUBPLOT (==untouched)</span>
0117     
0118     <span class="comment">% For this to work the default axes position must be in normalized coordinates</span>
0119     <span class="keyword">if</span> ~strcmp(get(gcf,<span class="string">'defaultaxesunits'</span>),<span class="string">'normalized'</span>)
0120       warning(<span class="string">'DefaultAxesUnits not normalized.'</span>)
0121       tmp = axes;
0122       set(axes,<span class="string">'units'</span>,<span class="string">'normalized'</span>)
0123       def_pos = get(tmp,<span class="string">'position'</span>);
0124       delete(tmp)
0125     <span class="keyword">else</span>
0126       def_pos = get(gcf,<span class="string">'DefaultAxesPosition'</span>)+[-.05 -.05 +.1 +.05];
0127     <span class="keyword">end</span>
0128     col_offset = def_pos(3)*(PERC_OFFSET_L+PERC_OFFSET_R)/ <span class="keyword">...</span>
0129     (ncols-PERC_OFFSET_L-PERC_OFFSET_R);
0130     row_offset = def_pos(4)*(PERC_OFFSET_B+PERC_OFFSET_T)/ <span class="keyword">...</span>
0131     (nrows-PERC_OFFSET_B-PERC_OFFSET_T);
0132     totalwidth = def_pos(3) + col_offset;
0133     totalheight = def_pos(4) + row_offset;
0134     width = totalwidth/ncols*(max(col)-min(col)+1)-col_offset;
0135     height = totalheight/nrows*(max(row)-min(row)+1)-row_offset;
0136     position = [def_pos(1)+min(col)*totalwidth/ncols <span class="keyword">...</span>
0137         def_pos(2)+min(row)*totalheight/nrows <span class="keyword">...</span>
0138         width height];
0139     <span class="keyword">if</span> width &lt;= 0.5*totalwidth/ncols
0140       position(1) = def_pos(1)+min(col)*(def_pos(3)/ncols);
0141       position(3) = 0.7*(def_pos(3)/ncols)*(max(col)-min(col)+1);
0142     <span class="keyword">end</span>
0143     <span class="keyword">if</span> height &lt;= 0.5*totalheight/nrows
0144       position(2) = def_pos(2)+min(row)*(def_pos(4)/nrows);
0145       position(4) = 0.7*(def_pos(4)/nrows)*(max(row)-min(row)+1);
0146     <span class="keyword">end</span>
0147   <span class="keyword">end</span>
0148 <span class="keyword">end</span>
0149 
0150 <span class="comment">% kill overlapping siblings if mnp specifier was used:</span>
0151 nextstate = get(gcf,<span class="string">'nextplot'</span>);
0152 <span class="keyword">if</span> strncmp(nextstate,<span class="string">'replace'</span>,7), nextstate = <span class="string">'add'</span>; <span class="keyword">end</span>
0153 <span class="keyword">if</span>(kill_siblings)
0154   <span class="keyword">if</span> delay_destroy
0155     <span class="keyword">if</span> nargout <span class="comment">%#ok&lt;UNRCH&gt;</span>
0156       error(<span class="string">'Function called with too many output arguments'</span>)
0157     <span class="keyword">else</span>
0158       set(gcf,<span class="string">'NextPlot'</span>,<span class="string">'replace'</span>); <span class="keyword">return</span>,
0159     <span class="keyword">end</span>
0160   <span class="keyword">end</span>
0161   sibs = get(gcf, <span class="string">'Children'</span>);
0162   got_one = 0;
0163   <span class="keyword">for</span> i1 = 1:length(sibs)
0164     <span class="keyword">if</span>(strcmp(get(sibs(i1),<span class="string">'Type'</span>),<span class="string">'axes'</span>))
0165       units = get(sibs(i1),<span class="string">'Units'</span>);
0166       set(sibs(i1),<span class="string">'Units'</span>,<span class="string">'normalized'</span>)
0167       sibpos = get(sibs(i1),<span class="string">'Position'</span>);
0168       set(sibs(i1),<span class="string">'Units'</span>,units);
0169       intersect = 1;
0170       <span class="keyword">if</span>(     (position(1) &gt;= sibpos(1) + sibpos(3)-tol) || <span class="keyword">...</span>
0171           (sibpos(1) &gt;= position(1) + position(3)-tol) || <span class="keyword">...</span>
0172           (position(2) &gt;= sibpos(2) + sibpos(4)-tol) || <span class="keyword">...</span>
0173           (sibpos(2) &gt;= position(2) + position(4)-tol))
0174     intersect = 0;
0175       <span class="keyword">end</span>
0176       <span class="keyword">if</span> intersect
0177     <span class="keyword">if</span> got_one || any(abs(sibpos - position) &gt; tol)
0178       delete(sibs(i1));
0179     <span class="keyword">else</span>
0180       got_one = 1;
0181       set(gcf,<span class="string">'CurrentAxes'</span>,sibs(i1));
0182       <span class="keyword">if</span> strcmp(nextstate,<span class="string">'new'</span>)
0183         create_axis = 1;
0184       <span class="keyword">else</span>
0185         create_axis = 0;
0186       <span class="keyword">end</span>
0187     <span class="keyword">end</span>
0188       <span class="keyword">end</span>
0189     <span class="keyword">end</span>
0190   <span class="keyword">end</span>
0191   set(gcf,<span class="string">'NextPlot'</span>,nextstate);
0192 <span class="keyword">end</span>
0193 
0194 <span class="comment">% create the axis:</span>
0195 <span class="keyword">if</span> create_axis
0196   <span class="keyword">if</span> strcmp(nextstate,<span class="string">'new'</span>), figure, <span class="keyword">end</span>
0197   ax = axes(<span class="string">'units'</span>,<span class="string">'normal'</span>,<span class="string">'Position'</span>, position);
0198   set(ax,<span class="string">'units'</span>,get(gcf,<span class="string">'defaultaxesunits'</span>))
0199 <span class="keyword">else</span> 
0200   ax = gca; 
0201 <span class="keyword">end</span>
0202 
0203 
0204 <span class="comment">% return identifier, if requested:</span>
0205 <span class="keyword">if</span>(nargout &gt; 0)
0206   theAxis = ax;
0207 <span class="keyword">end</span>
0208 
0209 <span class="comment">%% SCROLLSUBPLOT modification part</span>
0210 <span class="comment">%</span>
0211 <span class="comment">% From here on out set up scrollbar if needed</span>
0212 scroll_hndl = findall(gcf,<span class="string">'Type'</span>,<span class="string">'uicontrol'</span>,<span class="string">'Tag'</span>,<span class="string">'scroll'</span>);
0213 
0214 ax_indx = findall(gcf,<span class="string">'Type'</span>,<span class="string">'axes'</span>);
0215 
0216 <span class="keyword">if</span> length(ax_indx)==1
0217   maxrownr = -inf;
0218   minrownr = inf;
0219 <span class="keyword">end</span>
0220 
0221 <span class="comment">%% This is setting up the scroll-slider (invisible)</span>
0222 <span class="keyword">if</span> isempty(scroll_hndl)
0223   uicontrol(<span class="string">'Units'</span>,<span class="string">'normalized'</span>,<span class="keyword">...</span>
0224             <span class="string">'Style'</span>,<span class="string">'Slider'</span>,<span class="keyword">...</span>
0225             <span class="string">'Position'</span>,[.98,0,.02,1],<span class="keyword">...</span>
0226             <span class="string">'Min'</span>,0,<span class="keyword">...</span>
0227             <span class="string">'Max'</span>,1,<span class="keyword">...</span>
0228             <span class="string">'Value'</span>,1,<span class="keyword">...</span>
0229             <span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0230             <span class="string">'Tag'</span>,<span class="string">'scroll'</span>,<span class="keyword">...</span>
0231             <span class="string">'Callback'</span>,@(scr,event) <a href="#_sub1" class="code" title="subfunction scroll(old_val)">scroll</a>(1));
0232   set(gcf,<span class="string">'WindowScrollWheelFcn'</span>,@<a href="#_sub2" class="code" title="subfunction wheelScroll(src,evnt) ">wheelScroll</a>)      
0233 <span class="keyword">end</span>
0234 <span class="comment">% making it visible when needed</span>
0235 <span class="keyword">if</span> ( nrows*ncols &lt; thisPlot || thisPlot &lt; 1 )
0236   set(scroll_hndl,<span class="string">'visible'</span>,<span class="string">'on'</span>)
0237 <span class="keyword">end</span>
0238 <a href="#_sub1" class="code" title="subfunction scroll(old_val)">scroll</a>(1)
0239 
0240 
0241 maxrownr = max(maxrownr(:),max(-row(:)));
0242 minrownr = min(minrownr(:),min(-row(:)));
0243 
0244 <span class="comment">% Adjust the slider step-sizes to account for the number of rows of</span>
0245 <span class="comment">% subplots:</span>
0246 set(scroll_hndl,<span class="keyword">...</span>
0247     <span class="string">'sliderstep'</span>,[1/nrows 1]/(1/((nrows)/max(1,1+maxrownr(:)-minrownr(:)-nrows))))
0248 set(scroll_hndl,<span class="keyword">...</span>
0249     <span class="string">'value'</span>,1)
0250 
0251    <a name="_sub1" href="#_subfunctions" class="code">function scroll(old_val)</a>
0252    <span class="comment">% SCROLL - Scroll subplots vertically</span>
0253    <span class="comment">%   Used by scrollsubplot.</span>
0254    <span class="comment">% Calling:</span>
0255    <span class="comment">%   scroll(old_val)</span>
0256    <span class="comment">% Set as callback function handle:</span>
0257    <span class="comment">%</span>
0258    <span class="comment">%   See also SCROLLSUBPLOT</span>
0259    
0260    <span class="comment">% Copyright Bjorn Gustavsson 20050526</span>
0261    <span class="comment">% Version 2, modified to become a subfunction of scrollsubplot.</span>
0262    
0263    <span class="comment">%% Scroll the subplot axeses</span>
0264    <span class="comment">%  That is change their position some number of steps up or down</span>
0265    
0266    <span class="comment">% Get the handle of the scroll-slider handle and all the handle</span>
0267    <span class="comment">% to all the subplot axes</span>
0268    clbk_ui_hndl = findall(gcf,<span class="string">'Type'</span>,<span class="string">'uicontrol'</span>,<span class="string">'Tag'</span>,<span class="string">'scroll'</span>);
0269    ax_hndl = findall(gcf,<span class="string">'Type'</span>,<span class="string">'axes'</span>);
0270    
0271    <span class="keyword">for</span> i2 = length(ax_hndl):-1:1,
0272      a_pos(i2,:) = get(ax_hndl(i2),<span class="string">'position'</span>);
0273    <span class="keyword">end</span>
0274    
0275    pos_y_range = [min(.07,min(a_pos(:,2))) max(a_pos(:,2) + a_pos(:,4) )+.07-.9];
0276    
0277    val = get(clbk_ui_hndl,<span class="string">'value'</span>);
0278    step = ( old_val - val) * diff(pos_y_range);
0279    
0280    
0281    <span class="keyword">for</span> i2 = 1:length(ax_hndl),
0282      set(ax_hndl(i2),<span class="string">'position'</span>,get(ax_hndl(i2),<span class="string">'position'</span>) + [0 step 0 0]);
0283    <span class="keyword">end</span>
0284    
0285    set(clbk_ui_hndl,<span class="string">'callback'</span>,@(scr,event) <a href="#_sub1" class="code" title="subfunction scroll(old_val)">scroll</a>(val));
0286    
0287    <span class="keyword">end</span> <span class="comment">% end scroll</span>
0288 
0289    <a name="_sub2" href="#_subfunctions" class="code">function wheelScroll(src,evnt) </a><span class="comment">%#ok&lt;INUSL&gt;</span>
0290    <span class="comment">% wheelScroll - mouse-wheel wrapper to scroll-function</span>
0291    <span class="comment">% Calling:</span>
0292    <span class="comment">%   wheelScroll(src,evnt)</span>
0293    <span class="comment">% Set as calback</span>
0294    <span class="comment">%   set(gcf,'WindowScrollWheelFcn',@wheelScroll)</span>
0295    <span class="keyword">try</span>
0296      C = findobj(gcf,<span class="string">'type'</span>,<span class="string">'uicontrol'</span>);
0297      MaxVal = get(C,<span class="string">'Max'</span>);<span class="comment">%  = [1]</span>
0298      minval = get(C,<span class="string">'Min'</span>);<span class="comment">% = [0]</span>
0299      sliderstep = get(C,<span class="string">'SliderStep'</span>); <span class="comment">% = [0.0555556 0.222222]</span>
0300      oldval = get(C,<span class="string">'value'</span>);
0301      <span class="keyword">if</span> evnt.VerticalScrollCount &gt; 0 
0302        set(C,<span class="string">'value'</span>,max(minval,oldval-sliderstep(1)/10))
0303      <span class="keyword">elseif</span> evnt.VerticalScrollCount &lt; 0 
0304        set(C,<span class="string">'value'</span>,min(MaxVal,oldval+sliderstep(1)/10))
0305      <span class="keyword">end</span>
0306      <a href="#_sub1" class="code" title="subfunction scroll(old_val)">scroll</a>(oldval)
0307    <span class="keyword">catch</span>
0308    <span class="keyword">end</span>
0309    <span class="keyword">end</span> <span class="comment">%wheelScroll</span>
0310 
0311 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sun 19-Aug-2018 19:01:02 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>